/***************************************************************************
                          ezcommon  -  description
                             -------------------
    begin                : Aug. 2, 2007
    copyright            : (C) 2007 by Allen
    email                : bon_ami_@hotmail.com
 ***************************************************************************/

/***************************************************************************
 *                                                                         *
 *   Explicit Distribution Limitation                                      *
 *   This rule overrides others below.                                     *
 *   This program may not be modified or used by, or, if possible,         *
 *   redistributed to people described as below,                           *
 *   1.Japanese who hold hostility against Chinese.                        *
 *   2.or, those who discriminate against people based solely on race,     *
 *     gender or sexual orientation.                                       *
 *                                                                         *
 ***************************************************************************/
/***************************************************************************
 *                                                                         *
 *   This program is free software; you can redistribute it and/or modify  *
 *   it under the terms of the GNU General Public License as published by  *
 *   the Free Software Foundation; either version 2 of the License, or     *
 *   (at your option) any later version.                                   *
 *                                                                         *
 ***************************************************************************/
/*
 *	header of EZ Project common functionalities
 */

#ifndef EZCOMM_H
#define EZCOMM_H

#include <string>

namespace ezproject {

typedef struct
{
	std::string ip;
	int port;
} ezcommSocket;

//##ModelId=46A05E3A0213
class ezComm
{
  public:
    //##ModelId=46A07D0E0128
    Boolean setLocal(ezcommSocket *local);

    //##ModelId=46A07EED0251
    Boolean setRemote(ezcommSocket *remote);

    //##ModelId=46B04D9803DC
    Boolean setSocket(void *socket, ezcommSocket *local, ezcommSocket *remote);

    //##ModelId=46A08411038A
    Boolean connect();

    //##ModelId=46A0843D0290
    Boolean listen();

    //##ModelId=46A084620186
    disconnect();

    //##ModelId=46A084900290
    neglect();

    //##ModelId=46A0849D00DA
    ezRet send();

  private:
    //##ModelId=46A06F54036B
    void *(cbConnected)(void *socket, struct ezcommSocket *remote, void *buf, int len);
    //##ModelId=46A0785602CE
    (void *)(cbRecieved)(void *buf, int size);
    //##ModelId=46A078E400FA
    ezcommSocket localSocket;
    //##ModelId=46A07C400261
    ezcommSocket remoteSocket;
};

}	/*	namespace ezproject	*/

#endif	/*	EZCOMM_H	*/

